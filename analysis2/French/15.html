<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyse: √âpreuve de Moyenne Dur√©e - Version Corrig√©e</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
    
    <!-- KaTeX for Math Rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    
    <style>
        /* Custom styles from 1.html for a polished and modern look */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* Dark blue-slate background */
            color: #e2e8f0;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%231e293b' fill-opacity='0.4'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h4v-9H0v-1h4v-9H0v-1h4v-9H0v-1h4v-9H0v-1h4v-9H0v-1h4v-9H0v-1h4v-9H0v-1h4v-9H0v-1h4V0h1v4h9V0h1v4h9V0h1v4h9V0h1v4h9V0h1v4h9V0h1v4h9V0h1v4h9V0h1v4h9V0h1v4h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5h-9v5h-1v-5H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5v-9H0v-1h5V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5h9V0h1v5Z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        h1, h2, h3, h4 {
            font-family: 'Playfair Display', serif;
        }
        
        .exam-container {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 2rem;
            background: rgba(30, 41, 59, 0.5); /* Semi-transparent slate */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(100, 116, 139, 0.3);
            border-radius: 1.5rem;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        
        .exam-header {
            text-align: center;
            margin-bottom: 3rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(100, 116, 139, 0.5);
        }
        
        .exam-title {
            font-size: 2.75rem;
            color: #f1f5f9;
            font-weight: 800;
        }
        
        .exam-subtitle {
            font-size: 1.25rem;
            color: #94a3b8;
        }
        
        .section-title {
            font-size: 2.25rem;
            color: #e2e8f0;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #4f46e5;
        }
        
        .exercise {
            margin-bottom: 2.5rem;
            padding: 2rem;
            border-radius: 1rem;
            background-color: rgba(15, 23, 42, 0.5);
            border: 1px solid #334155;
            transition: all 0.3s ease;
        }
        .exercise:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            border-color: #4f46e5;
        }
        
        .exercise-title {
            font-size: 1.75rem;
            font-weight: 700;
            color: #93c5fd; /* Light blue for titles */
            margin-bottom: 1rem;
        }

        .exercise-content p, .modal-content p {
            line-height: 1.8;
            margin-bottom: 1rem;
            color: #cbd5e1;
        }
        
        .btn-container {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.2rem;
            border-radius: 9999px; /* Pill shape */
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }
        .btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .btn-primary {
            background-color: #4f46e5;
            color: white;
        }
        .btn-secondary {
            background-color: #475569;
            color: white;
        }
        .btn-tertiary {
            background-color: #10b981;
            color: white;
        }
        
        .modal {
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(8px);
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: #1e293b;
            margin: auto;
            padding: 2.5rem;
            border: 1px solid #475569;
            width: 90%;
            max-width: 700px;
            border-radius: 1rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            animation: fadeIn 0.5s;
            color: #e2e8f0;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #475569;
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .modal-title {
            font-size: 1.75rem;
            color: #f1f5f9;
        }
        
        .close-btn {
            color: #94a3b8;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .close-btn:hover,
        .close-btn:focus {
            color: #f1f5f9;
        }
        
        @keyframes fadeIn {
            from {opacity: 0; transform: scale(0.95) translateY(10px);}
            to {opacity: 1; transform: scale(1) translateY(0);}
        }

        .katex-display {
            background-color: rgba(15, 23, 42, 0.7);
            border: 1px solid #334155;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
        }

        .cs-card {
            background: linear-gradient(145deg, #1e293b, #0f172a);
            border-radius: 1rem;
            padding: 2rem;
            border: 1px solid #334155;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.4), 0 2px 4px -1px rgba(0,0,0,0.2);
        }
        .cs-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.3), 0 10px 10px -5px rgba(0,0,0,0.2);
            border-color: #4f46e5;
        }
        
        pre[class*="language-"] {
            background: #0f172a;
            color: #e2e8f0;
            padding: 1.5em;
            margin: 1em 0;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: 'Fira Code', 'Courier New', Courier, monospace;
            border: 1px solid #334155;
        }
    </style>
</head>
<body class="antialiased">

    <div class="exam-container">
        <header class="exam-header">
            <h1 class="exam-title">Analyse</h1>
            <p class="exam-subtitle">Troisi√®me √âpreuve de Moyenne Dur√©e (27 Mai 2008)</p>
        </header>

        <main>
            <section id="exam-questions">
                <h2 class="section-title">√ânonc√© de l'Examen</h2>
                
                <!-- Exercise 1 -->
                <div class="exercise">
                    <h3 class="exercise-title">Exercice 1 (6 pts)</h3>
                    <div class="exercise-content">
                        <p>Soit l'int√©grale <span class="katex-inline" data-id="ex1-int"></span>.</p>
                        <p>a) D√©terminer les points singuliers de l'int√©grale I.</p>
                        <p>b) Calculer la d√©riv√©e de la fonction <span class="katex-inline" data-id="ex1-func"></span> pour <span class="katex-inline" data-id="ex1-domain"></span>.</p>
                        <p>c) Montrer que l'int√©grale I est convergente.</p>
                    </div>
                    <div class="btn-container">
                        <button class="btn btn-primary" onclick="showModal('hint1')">Indice</button>
                        <button class="btn btn-secondary" onclick="showModal('knowledge1')">Pr√©requis</button>
                    </div>
                </div>

                <!-- Exercise 2 -->
                <div class="exercise">
                    <h3 class="exercise-title">Exercice 2 (8 pts)</h3>
                    <div class="exercise-content">
                        <p>a) Calculer l'int√©grale <span class="katex-inline" data-id="ex2-q1-int"></span>.</p>
                        <p>b) Pour <span class="katex-inline" data-id="ex2-q2-domain"></span>, r√©soudre l'√©quation diff√©rentielle suivante: <span class="katex-display" data-id="ex2-q2-eq"></span></p>
                        <p>c) En effectuant le changement <span class="katex-inline" data-id="ex2-q3-sub"></span>, r√©soudre l'√©quation diff√©rentielle: <span class="katex-display" data-id="ex2-q3-eq"></span></p>
                        <p>d) D√©terminer la solution <span class="katex-inline" data-id="ex2-q4-sol"></span> de l'√©quation diff√©rentielle (de la question c) satisfaisant aux conditions initiales <span class="katex-inline" data-id="ex2-q4-cond"></span>.</p>
                    </div>
                    <div class="btn-container">
                        <button class="btn btn-primary" onclick="showModal('hint2')">Indice</button>
                        <button class="btn btn-secondary" onclick="showModal('knowledge2')">Pr√©requis</button>
                    </div>
                </div>

                <!-- Exercise 3 -->
                <div class="exercise">
                    <h3 class="exercise-title">Exercice 3 (5 pts)</h3>
                    <div class="exercise-content">
                        <p>Soit <span class="katex-inline" data-id="ex3-func-map"></span> la fonction d√©finie par <span class="katex-display" data-id="ex3-func-def"></span></p>
                        <p>a) √âtudier la continuit√© de f sur <span class="katex-inline" data-id="ex3-r2"></span>.</p>
                        <p>b) Calculer <span class="katex-inline" data-id="ex3-dfdx"></span> et <span class="katex-inline" data-id="ex3-dfdy"></span> sur leurs domaines d'existence.</p>
                        <p>c) √âtudier la diff√©rentiabilit√© de f sur <span class="katex-inline" data-id="ex3-r2-0"></span>.</p>
                        <p>d) f est-elle diff√©rentiable en (0,0)? Justifier.</p>
                    </div>
                    <div class="btn-container">
                        <button class="btn btn-primary" onclick="showModal('hint3')">Indice</button>
                        <button class="btn btn-secondary" onclick="showModal('knowledge3')">Pr√©requis</button>
                    </div>
                </div>
            </section>

            <section id="exam-solutions">
                <h2 class="section-title">Solutions D√©taill√©es</h2>

                <!-- Solution 1 -->
                <div class="exercise">
                    <h3 class="exercise-title">Solution de l'Exercice 1</h3>
                    <div class="exercise-content">
                        <p>a) Les points singuliers de l'int√©grale sont les bornes de l'intervalle, <span class="katex-inline" data-id="sol1-sing1"></span> (√† cause de <span class="katex-inline" data-id="sol1-lnx"></span> et <span class="katex-inline" data-id="sol1-sqrtx"></span>) et <span class="katex-inline" data-id="sol1-sing2"></span> (√† cause de <span class="katex-inline" data-id="sol1-denom"></span> au d√©nominateur).</p>
                        <p>b) Soit <span class="katex-inline" data-id="sol1-f"></span>. Sa d√©riv√©e est : <span class="katex-display" data-id="sol1-deriv"></span></p>
                        <p>c) Pour montrer que l'int√©grale I est convergente, on √©tudie le comportement de l'int√©grande aux voisinages des points singuliers.</p>
                        <p>‚Ä¢ Au voisinage de <span class="katex-inline" data-id="sol1-vois0"></span>: <span class="katex-inline" data-id="sol1-equiv0"></span>. L'int√©grale <span class="katex-inline" data-id="sol1-int-bert"></span> est une int√©grale de Bertrand qui converge car l'exposant de x est <span class="katex-inline" data-id="sol1-exp0"></span>.</p>
                        <p>‚Ä¢ Au voisinage de <span class="katex-inline" data-id="sol1-vois1"></span>, on pose <span class="katex-inline" data-id="sol1-subst"></span>. Alors <span class="katex-inline" data-id="sol1-equiv1"></span>. L'int√©grale <span class="katex-inline" data-id="sol1-int-riem"></span> est une int√©grale de Riemann qui converge car l'exposant de t est <span class="katex-inline" data-id="sol1-exp1"></span>.</p>
                        <p>Comme l'int√©grale converge aux deux bornes, l'int√©grale I est convergente.</p>
                    </div>
                    <div class="btn-container">
                        <button class="btn btn-tertiary" onclick="showModal('explanation1')">Explication D√©taill√©e</button>
                    </div>
                </div>

                <!-- Solution 2 -->
                <div class="exercise">
                    <h3 class="exercise-title">Solution de l'Exercice 2</h3>
                    <div class="exercise-content">
                        <p>a) On pose <span class="katex-inline" data-id="sol2-p1-sub"></span>, donc <span class="katex-inline" data-id="sol2-p1-du"></span>. L'int√©grale devient <span class="katex-display" data-id="sol2-p1-res"></span></p>
                        <p>b) On r√©sout <span class="katex-inline" data-id="sol2-p2-eq"></span>. L'√©quation homog√®ne <span class="katex-inline" data-id="sol2-p2-homo"></span> a pour solution <span class="katex-inline" data-id="sol2-p2-homo-sol"></span>. Par la m√©thode de la variation de la constante, on pose <span class="katex-inline" data-id="sol2-p2-var-const"></span>. On obtient <span class="katex-inline" data-id="sol2-p2-c-prime"></span>, donc <span class="katex-inline" data-id="sol2-p2-c"></span>. La solution g√©n√©rale est <span class="katex-inline" data-id="sol2-p2-gen-sol"></span>.</p>
                        <p>c) On pose <span class="katex-inline" data-id="sol2-p3-sub"></span>. L'√©quation devient <span class="katex-inline" data-id="sol2-p3-new-eq"></span>, qui est l'√©quation de la partie (b). Donc <span class="katex-inline" data-id="sol2-p3-y-prime"></span>. On int√®gre pour trouver y: <span class="katex-display" data-id="sol2-p3-y"></span></p>
                        <p>d) On d√©termine la solution <span class="katex-inline" data-id="sol2-p4-sol"></span> telle que <span class="katex-inline" data-id="sol2-p4-cond"></span>. <span class="katex-inline" data-id="sol2-p4-c2"></span>. <span class="katex-inline" data-id="sol2-p4-c1"></span>. La solution est <span class="katex-inline" data-id="sol2-p4-final-sol"></span>.</p>
                    </div>
                    <div class="btn-container">
                        <button class="btn btn-tertiary" onclick="showModal('explanation2')">Explication D√©taill√©e</button>
                    </div>
                </div>

                <!-- Solution 3 -->
                <div class="exercise">
                    <h3 class="exercise-title">Solution de l'Exercice 3</h3>
                    <div class="exercise-content">
                        <p>a) <strong>Continuit√©:</strong> Pour <span class="katex-inline" data-id="sol3-p1-neq0"></span>, f est continue comme compos√©e de fonctions continues. En (0,0), on passe en coordonn√©es polaires <span class="katex-inline" data-id="sol3-p1-polar"></span>. <span class="katex-display" data-id="sol3-p1-lim"></span>. Donc <span class="katex-inline" data-id="sol3-p1-lim-f"></span>. f est continue sur <span class="katex-inline" data-id="sol3-r2"></span>.</p>
                        <p>b) <strong>D√©riv√©es partielles pour <span class="katex-inline" data-id="sol3-p2-neq0"></span>:</strong> <span class="katex-display" data-id="sol3-p2-dfdx"></span> <span class="katex-display" data-id="sol3-p2-dfdy"></span></p>
                        <p>c) Sur <span class="katex-inline" data-id="sol3-p3-r2-0"></span>, les d√©riv√©es partielles sont continues, donc f est de classe <span class="katex-inline" data-id="sol3-p3-c1"></span> et est diff√©rentiable.</p>
                        <p>d) <strong>Diff√©rentiabilit√© en (0,0):</strong> On calcule les d√©riv√©es partielles en (0,0). <span class="katex-display" data-id="sol3-p4-dfdx00"></span> Comme <span class="katex-inline" data-id="sol3-p4-hln"></span>, on a <span class="katex-inline" data-id="sol3-p4-equiv"></span>. La limite est <span class="katex-inline" data-id="sol3-p4-lim-res"></span>. La d√©riv√©e partielle <span class="katex-inline" data-id="sol3-p4-dfdx-ne"></span> n'existe pas en (0,0), donc f n'est pas diff√©rentiable en (0,0).</p>
                    </div>
                    <div class="btn-container">
                        <button class="btn btn-tertiary" onclick="showModal('explanation3')">Explication D√©taill√©e</button>
                    </div>
                </div>
            </section>
            
            <!-- Section: Applications in Computer Science -->
            <section id="cs-applications">
                <h2 class="section-title">Applications en Informatique</h2>
                <div class="space-y-12">
    
                    <!-- CS Application 1: Improper Integrals -->
                    <div class="cs-card">
                        <h3 class="text-3xl font-bold text-purple-400 mb-4">1. Int√©grales Impropres : L'Analyse d'Algorithmes Probabilistes üé≤</h3>
                        <p class="text-lg mb-4 text-slate-300">L'√©tude de la <strong>convergence d'int√©grales impropres</strong> est analogue √† l'analyse du <strong>co√ªt attendu</strong> d'algorithmes qui ont une chance de prendre beaucoup de temps. Certains algorithmes, notamment ceux qui reposent sur le hasard, n'ont pas de pire cas bien d√©fini (ils pourraient th√©oriquement tourner √† l'infini), mais leur performance moyenne est excellente.</p>
                        <h4 class="text-xl font-semibold text-slate-200 mt-6 mb-2">Exemple Pratique : Le Temps d'attente d'un Paquet R√©seau</h4>
                        <p class="mb-4 text-slate-400">Imaginez un protocole r√©seau qui r√©essaie d'envoyer un paquet apr√®s un √©chec. Si la probabilit√© d'√©chec √† chaque tentative est <span class="katex-inline" data-id="cs1-p"></span>, le temps d'attente total attendu peut √™tre mod√©lis√© par une somme infinie (ou une int√©grale si le temps est continu). Savoir si cette int√©grale converge nous dit si le temps d'attente moyen est fini. L'analyse aux "points singuliers" (ici, un nombre de tentatives tendant vers l'infini) est cruciale pour garantir la stabilit√© du syst√®me.</p>
                        <pre class="language-pseudocode"><code>// Le co√ªt attendu E[T] est la somme des (co√ªt * probabilit√©)
    // E[T] = Œ£ (temps_i * P(l'√©v√©nement i se produit))
    // E[T] = ‚à´ t * p(t) dt
    
    function expectedWaitTime(failure_prob) {
      let expected_time = 0;
      let prob_of_reaching_step_i = 1.0;
      
      // Th√©oriquement, i peut aller √† l'infini
      for (let i = 1; i < MAX_RETRIES; i++) {
        // Probabilit√© que la transmission r√©ussisse √† cette √©tape
        let success_prob_now = (1 - failure_prob);
        
        // On ajoute le temps pond√©r√© par la probabilit√©
        expected_time += i * prob_of_reaching_step_i * success_prob_now;
        
        // Mise √† jour de la proba d'atteindre la prochaine √©tape
        prob_of_reaching_step_i *= failure_prob;
      }
      
      // L'int√©grale converge si failure_prob < 1
      return expected_time;
    }</code></pre>
                    </div>
    
                    <!-- CS Application 2: Differential Equations -->
                    <div class="cs-card">
                        <h3 class="text-3xl font-bold text-purple-400 mb-4">2. √âquations Diff√©rentielles : Les R√©seaux de Neurones Modernes üß†</h3>
                        <p class="text-lg mb-4 text-slate-300">Les √©quations diff√©rentielles d√©crivent l'√©volution continue des syst√®mes. En <strong>apprentissage automatique (Machine Learning)</strong>, cette id√©e a √©t√© exploit√©e pour cr√©er une nouvelle classe de mod√®les : les <strong>R√©seaux de Neurones √† √âquations Diff√©rentielles Ordinaires (Neural ODEs)</strong>. Au lieu de d√©finir un nombre fixe de couches discr√®tes, un Neural ODE d√©finit la dynamique continue de l'√©volution des caract√©ristiques √† travers le r√©seau.</p>
                        <h4 class="text-xl font-semibold text-slate-200 mt-6 mb-2">Exemple Pratique : Classification d'Images</h4>
                        <p class="mb-4 text-slate-400">Dans un r√©seau de neurones classique, l'information passe d'une couche <span class="katex-inline" data-id="cs2-h_t"></span> √† la suivante <span class="katex-inline" data-id="cs2-h_t+1"></span> par une transformation discr√®te. Dans un Neural ODE, on consid√®re que l'√©tat du r√©seau <span class="katex-inline" data-id="cs2-h_t_cont"></span> √©volue contin√ªment dans le "temps" (la profondeur du r√©seau). On apprend une fonction qui d√©finit cette dynamique, <span class="katex-inline" data-id="cs2-ode-eq"></span>. Pour obtenir la sortie, on r√©sout cette √©quation diff√©rentielle num√©riquement.</p>
                         <pre class="language-pseudocode"><code>// R√©seau de neurones classique (ResNet)
    // h_t+1 = h_t + f(h_t, Œ∏_t)  // Transformation discr√®te
    
    // Neural ODE
    // dh(t)/dt = f(h(t), t, Œ∏)  // Dynamique continue
    
    class NeuralODE {
      constructor(dynamics_function) {
        this.f = dynamics_function; // Un petit r√©seau de neurones qui apprend la dynamique
      }
    
      forward(h_initial, t_final) {
        // Pour obtenir la sortie, on int√®gre num√©riquement la dynamique
        // de t=0 √† t=t_final en partant de l'√©tat initial h_initial.
        // On utilise un solveur d'EDO (comme Runge-Kutta).
        let h_final = ODESolve(this.f, h_initial, 0, t_final);
        return h_final;
      }
    }
    </code></pre>
                    </div>
                    
                    <!-- CS Application 3: Differentiability -->
                    <div class="cs-card">
                        <h3 class="text-3xl font-bold text-purple-400 mb-4">3. Diff√©rentiabilit√© : L'Optimisation par Descente de Gradient üìâ</h3>
                        <p class="text-lg mb-4 text-slate-300">L'analyse de la diff√©rentiabilit√© d'une fonction √† plusieurs variables est le fondement de l'optimisation en informatique, en particulier pour l'entra√Ænement des mod√®les d'apprentissage automatique. La <strong>descente de gradient</strong>, l'algorithme le plus utilis√© pour entra√Æner les r√©seaux de neurones, repose enti√®rement sur le calcul des <strong>d√©riv√©es partielles</strong> (le gradient) de la fonction de co√ªt.</p>
                        <h4 class="text-xl font-semibold text-slate-200 mt-6 mb-2">Exemple Pratique : Entra√Ænement d'un R√©seau de Neurones</h4>
                        <p class="mb-4 text-slate-400">La fonction de co√ªt <span class="katex-inline" data-id="cs3-L"></span> mesure √† quel point les pr√©dictions du r√©seau sont mauvaises. C'est une fonction des millions de poids du r√©seau <span class="katex-inline" data-id="cs3-W"></span>. Le gradient <span class="katex-inline" data-id="cs3-nablaL"></span> indique la direction de la plus forte pente. Pour minimiser le co√ªt, on met √† jour les poids en se d√©pla√ßant dans la direction oppos√©e au gradient. Les points o√π la fonction n'est pas diff√©rentiable (comme dans l'exercice 3) posent un d√©fi, courant avec des fonctions d'activation comme <strong>ReLU</strong>, et n√©cessitent des techniques d'optimisation plus avanc√©es (comme les sous-gradients).</p>
                        <pre class="language-pseudocode"><code>// L: Fonction de co√ªt
    // W: Poids du r√©seau de neurones
    // learning_rate: Taille du pas
    
    function train(data, labels) {
      for (let i = 0; i < num_epochs; i++) {
        // 1. Calculer les pr√©dictions du r√©seau
        let predictions = model.forward(data, W);
        
        // 2. Calculer le co√ªt (l'erreur)
        let loss = L(predictions, labels);
        
        // 3. Calculer les d√©riv√©es partielles du co√ªt par rapport √† chaque poids
        // C'est le c≈ìur de la "backpropagation"
        let gradient = compute_gradient(L, W);
        
        // 4. Mettre √† jour les poids en descendant la pente
        // W_new = W_old - learning_rate * ‚àáL(W_old)
        W = W - learning_rate * gradient;
      }
      return W; // Poids optimis√©s
    }</code></pre>
                    </div>
    
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <div id="hint1" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Indice pour l'Exercice 1</h3><span class="close-btn" onclick="closeModal('hint1')">&times;</span></div><p>Pour la convergence, analysez le comportement de la fonction pr√®s des points singuliers. Utilisez des √©quivalents simples pour d√©terminer la nature des int√©grales (Riemann, Bertrand).</p></div></div>
    <div id="knowledge1" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Pr√©requis pour l'Exercice 1</h3><span class="close-btn" onclick="closeModal('knowledge1')">&times;</span></div><p><strong>Int√©grales impropres :</strong> Une int√©grale est impropre si l'intervalle d'int√©gration est infini ou si la fonction a une discontinuit√© infinie √† un point de l'intervalle.</p><p><strong>Crit√®res de convergence :</strong></p><p>‚Ä¢ <strong>Int√©grale de Riemann :</strong> <span class="katex-inline" data-id="k1-riemann"></span> converge si <span class="katex-inline" data-id="k1-alpha1"></span>.</p><p>‚Ä¢ <strong>Int√©grale de Bertrand :</strong> <span class="katex-inline" data-id="k1-bertrand"></span> converge si <span class="katex-inline" data-id="k1-alpha2"></span> ou (<span class="katex-inline" data-id="k1-alpha-beta"></span>).</p><p><strong>Calcul de d√©riv√©es :</strong> Ma√Ætrise des r√®gles de d√©rivation, notamment pour les fonctions compos√©es et les quotients.</p></div></div>
    <div id="explanation1" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Explication D√©taill√©e pour l'Exercice 1</h3><span class="close-btn" onclick="closeModal('explanation1')">&times;</span></div><h4 class="text-xl font-bold mt-4 mb-2 text-blue-300">a) Points Singuliers</h4><p>Les points singuliers sont les points o√π l'int√©grande n'est pas d√©fini. Ici, le d√©nominateur <span class="katex-inline" data-id="e1-denom"></span> s'annule en <span class="katex-inline" data-id="e1-x0"></span> et <span class="katex-inline" data-id="e1-x1"></span>. De plus, <span class="katex-inline" data-id="e1-lnx"></span> n'est pas d√©fini en <span class="katex-inline" data-id="e1-x0-2"></span>. Les singularit√©s sont donc aux bornes <span class="katex-inline" data-id="e1-x0-3"></span> et <span class="katex-inline" data-id="e1-x1-2"></span>.</p><h4 class="text-xl font-bold mt-4 mb-2 text-blue-300">b) Calcul de la D√©riv√©e</h4><p>On utilise la r√®gle de d√©rivation d'une fonction compos√©e <span class="katex-inline" data-id="e1-deriv-rule"></span>. Pour <span class="katex-inline" data-id="e1-f"></span>, on a <span class="katex-inline" data-id="e1-g"></span>. La d√©riv√©e de g(x) est <span class="katex-inline" data-id="e1-g-prime"></span>. En appliquant la formule, on obtient le r√©sultat attendu.</p><h4 class="text-xl font-bold mt-4 mb-2 text-blue-300">c) √âtude de la Convergence</h4><p><strong>Voisinage de 0 :</strong> On cherche un √©quivalent de l'int√©grande quand <span class="katex-inline" data-id="e1-x-tend-0"></span>. On a <span class="katex-inline" data-id="e1-1mx-approx"></span>. Donc, <span class="katex-inline" data-id="e1-integrand-approx0"></span>. C'est une int√©grale de Bertrand <span class="katex-inline" data-id="e1-bertrand"></span> avec <span class="katex-inline" data-id="e1-alpha-val"></span> et <span class="katex-inline" data-id="e1-beta-val"></span>. Comme <span class="katex-inline" data-id="e1-alpha-cond"></span>, l'int√©grale converge en 0.</p><p><strong>Voisinage de 1 :</strong> On pose <span class="katex-inline" data-id="e1-t-subst"></span>, donc <span class="katex-inline" data-id="e1-x-subst"></span>. Quand <span class="katex-inline" data-id="e1-x-tend-1"></span>, <span class="katex-inline" data-id="e1-t-tend-0"></span>. On a <span class="katex-inline" data-id="e1-ln-approx"></span> et <span class="katex-inline" data-id="e1-x-approx1"></span>. L'int√©grande devient <span class="katex-inline" data-id="e1-integrand-approx1"></span>. C'est une int√©grale de Riemann <span class="katex-inline" data-id="e1-riemann"></span> avec <span class="katex-inline" data-id="e1-alpha-val-2"></span>. Comme <span class="katex-inline" data-id="e1-alpha-cond-2"></span>, l'int√©grale converge en 1.</p><p>Puisque l'int√©grale converge aux deux points singuliers, elle est convergente.</p></div></div>
    <div id="hint2" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Indice pour l'Exercice 2</h3><span class="close-btn" onclick="closeModal('hint2')">&times;</span></div><p>Pour l'√©quation diff√©rentielle (b), c'est une √©quation lin√©aire du premier ordre. R√©solvez d'abord l'√©quation homog√®ne, puis utilisez la m√©thode de la variation de la constante.</p><p>Pour la question (c), le changement de variable <span class="katex-inline" data-id="h2-subst"></span> la ram√®ne directement √† la question (b).</p></div></div>
    <div id="knowledge2" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Pr√©requis pour l'Exercice 2</h3><span class="close-btn" onclick="closeModal('knowledge2')">&times;</span></div><p><strong>Int√©gration par substitution :</strong> Reconna√Ætre une forme <span class="katex-inline" data-id="k2-f1"></span> pour simplifier l'int√©grale.</p><p><strong>√âquations diff√©rentielles lin√©aires du premier ordre :</strong> Une √©quation de la forme <span class="katex-inline" data-id="k2-f2"></span>. La solution est <span class="katex-inline" data-id="k2-f3"></span>.</p><p><strong>M√©thode de la variation de la constante :</strong> Pour trouver une solution particuli√®re √† l'√©quation non homog√®ne, on remplace la constante C de la solution homog√®ne par une fonction C(x).</p></div></div>
    <div id="explanation2" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Explication D√©taill√©e pour l'Exercice 2</h3><span class="close-btn" onclick="closeModal('explanation2')">&times;</span></div><h4 class="text-xl font-bold mt-4 mb-2 text-blue-300">a) Calcul d'int√©grale</h4><p>On veut calculer <span class="katex-inline" data-id="e2-p1-int"></span>. On reconna√Æt une forme <span class="katex-inline" data-id="e2-p1-form"></span> avec <span class="katex-inline" data-id="e2-p1-u"></span> et <span class="katex-inline" data-id="e2-p1-uprime"></span>. L'int√©grale est donc directe : <span class="katex-inline" data-id="e2-p1-res-exp"></span>.</p><h4 class="text-xl font-bold mt-4 mb-2 text-blue-300">b) R√©solution de l'√©quation diff√©rentielle (u)</h4><p><strong>√âtape 1: √âquation homog√®ne.</strong> On r√©sout <span class="katex-inline" data-id="e2-p2-homo"></span>. C'est <span class="katex-inline" data-id="e2-p2-sep"></span>. En int√©grant, <span class="katex-inline" data-id="e2-p2-int-homo"></span>. Donc, <span class="katex-inline" data-id="e2-p2-sol-homo"></span>.</p><p><strong>√âtape 2: Variation de la constante.</strong> On pose <span class="katex-inline" data-id="e2-p2-var-const"></span>. On d√©rive et on substitue dans l'√©quation compl√®te pour trouver <span class="katex-inline" data-id="e2-p2-c-prime"></span>. En int√©grant, <span class="katex-inline" data-id="e2-p2-c-int"></span>. La solution g√©n√©rale est la somme des solutions.</p><h4 class="text-xl font-bold mt-4 mb-2 text-blue-300">c) R√©solution de l'√©quation diff√©rentielle (y)</h4><p>Avec <span class="katex-inline" data-id="e2-p3-sub"></span>, l'√©quation <span class="katex-inline" data-id="e2-p3-eq"></span> devient <span class="katex-inline" data-id="e2-p3-new-eq"></span>, qui est l'√©quation de la partie (b). Donc, on a <span class="katex-inline" data-id="e2-p3-y-prime"></span>. Pour trouver y, il suffit d'int√©grer cette expression. Le premier terme <span class="katex-inline" data-id="e2-p3-int1"></span> a √©t√© calcul√© en (a). Le second terme <span class="katex-inline" data-id="e2-p3-int2"></span> donne <span class="katex-inline" data-id="e2-p3-int2-res"></span>. On combine les r√©sultats et on ajoute la constante d'int√©gration <span class="katex-inline" data-id="e2-p3-c2"></span>.</p><h4 class="text-xl font-bold mt-4 mb-2 text-blue-300">d) Solution avec conditions initiales</h4><p>On utilise <span class="katex-inline" data-id="e2-p4-cond"></span>. <span class="katex-inline" data-id="e2-p4-f0"></span> nous donne <span class="katex-inline" data-id="e2-p4-c2-val"></span>. <span class="katex-inline" data-id="e2-p4-fp0"></span> nous donne <span class="katex-inline" data-id="e2-p4-c1-val"></span>. En rempla√ßant ces valeurs, on obtient la solution unique.</p></div></div>
    <div id="hint3" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Indice pour l'Exercice 3</h3><span class="close-btn" onclick="closeModal('hint3')">&times;</span></div><p>Pour la continuit√© et la diff√©rentiabilit√© en (0,0), le passage en coordonn√©es polaires est souvent la cl√©.</p><p>Pour la diff√©rentiabilit√© en (0,0), il ne suffit pas que les d√©riv√©es partielles existent. Il faut v√©rifier la d√©finition de la diff√©rentiabilit√© ou utiliser le th√©or√®me qui lie diff√©rentiabilit√© et continuit√© des d√©riv√©es partielles.</p></div></div>
    <div id="knowledge3" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Pr√©requis pour l'Exercice 3</h3><span class="close-btn" onclick="closeModal('knowledge3')">&times;</span></div><p><strong>Continuit√© des fonctions de plusieurs variables :</strong> Une fonction f est continue en un point <span class="katex-inline" data-id="k3-p0"></span> si <span class="katex-inline" data-id="k3-lim-cont"></span>.</p><p><strong>Coordonn√©es polaires :</strong> <span class="katex-inline" data-id="k3-polar"></span>. Utile pour calculer des limites en (0,0).</p><p><strong>D√©riv√©es partielles :</strong> Calcul de la d√©riv√©e par rapport √† une variable en consid√©rant les autres comme des constantes.</p><p><strong>Diff√©rentiabilit√© :</strong> Une fonction f est diff√©rentiable en <span class="katex-inline" data-id="k3-p0-2"></span> s'il existe une application lin√©aire <span class="katex-inline" data-id="k3-L"></span> telle que <span class="katex-inline" data-id="k3-diff-def"></span>. Un th√©or√®me suffisant : si les d√©riv√©es partielles de f existent et sont continues dans un voisinage de <span class="katex-inline" data-id="k3-p0-3"></span>, alors f est diff√©rentiable en <span class="katex-inline" data-id="k3-p0-4"></span>.</p></div></div>
    <div id="explanation3" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Explication D√©taill√©e pour l'Exercice 3</h3><span class="close-btn" onclick="closeModal('explanation3')">&times;</span></div><h4 class="text-xl font-bold mt-4 mb-2 text-blue-300">a) Continuit√©</h4><p>Hors de (0,0), la fonction est une composition de fonctions continues (<span class="katex-inline" data-id="e3-p1-exp"></span>, <span class="katex-inline" data-id="e3-p1-ln"></span>, polyn√¥mes), donc elle est continue.</p><p>En (0,0), on passe en polaires. L'exposant devient <span class="katex-inline" data-id="e3-p1-expo-polar"></span>. On utilise la croissance compar√©e <span class="katex-inline" data-id="e3-p1-lim-croiss"></span>. Ainsi, l'exposant tend vers 0. La limite de f(x,y) est <span class="katex-inline" data-id="e3-p1-e0"></span>, ce qui est √©gal √† <span class="katex-inline" data-id="e3-p1-f00"></span>. La fonction est donc continue en (0,0).</p><h4 class="text-xl font-bold mt-4 mb-2 text-blue-300">b) D√©riv√©es Partielles</h4><p>On applique la r√®gle de d√©rivation de <span class="katex-inline" data-id="e3-p2-exp-u"></span> qui est <span class="katex-inline" data-id="e3-p2-exp-u-prime"></span>. Ici, <span class="katex-inline" data-id="e3-p2-u"></span>. On calcule <span class="katex-inline" data-id="e3-p2-dudx"></span> et <span class="katex-inline" data-id="e3-p2-dudy"></span> en utilisant la d√©rivation d'un produit et on obtient les expressions donn√©es.</p><h4 class="text-xl font-bold mt-4 mb-2 text-blue-300">c) Diff√©rentiabilit√© hors de (0,0)</h4><p>Les expressions des d√©riv√©es partielles calcul√©es en (b) sont des compositions de fonctions continues sur <span class="katex-inline" data-id="e3-p3-r2-0"></span>. Les d√©riv√©es partielles sont donc continues sur ce domaine. Un th√©or√®me du cours affirme que si les d√©riv√©es partielles sont continues sur un ouvert, alors la fonction y est diff√©rentiable (et m√™me de classe C¬π).</p><h4 class="text-xl font-bold mt-4 mb-2 text-blue-300">d) Diff√©rentiabilit√© en (0,0)</h4><p>On doit revenir √† la d√©finition de la d√©riv√©e partielle en (0,0) avec le taux d'accroissement. Pour <span class="katex-inline" data-id="e3-p4-dfdx00"></span>, on calcule <span class="katex-inline" data-id="e3-p4-lim-def"></span>. L'expression se simplifie en <span class="katex-inline" data-id="e3-p4-lim-h"></span>. On a une forme √©quivalente √† <span class="katex-inline" data-id="e3-p4-lim-h-equiv"></span> qui tend vers <span class="katex-inline" data-id="e3-p4-neg-inf"></span>. Comme la limite n'est pas finie, la d√©riv√©e partielle par rapport √† x n'existe pas en (0,0). Une condition n√©cessaire √† la diff√©rentiabilit√© est l'existence de toutes les d√©riv√©es partielles. Comme ce n'est pas le cas, f n'est pas diff√©rentiable en (0,0).</p></div></div>

    <script>
        function renderKatex() {
            // Defer rendering slightly to ensure all content is loaded
            setTimeout(() => {
                document.querySelectorAll('.katex-inline, .katex-display').forEach(el => {
                    const content = el.dataset.latex || el.textContent;
                    const displayMode = el.classList.contains('katex-display');
                    try {
                        katex.render(content, el, {
                            throwOnError: false,
                            displayMode: displayMode
                        });
                    } catch (e) {
                        console.error("Erreur de rendu KaTeX:", e, "sur l'√©l√©ment:", el);
                        el.textContent = `Erreur de rendu de la formule: ${content}`;
                    }
                });
            }, 100);
        }
        
        function fillFormulas() {
            const formulas = {
                // Exam Questions from 15.html
                'ex1-int': "I=\\int_{0}^{1}\\frac{\\ln(x)}{\\sqrt{x(1-x)^{3}}}dx",
                'ex1-func': "f(x)=\\sqrt{\\frac{x}{1-x}}",
                'ex1-domain': "x \\in ]0,1[",
                'ex2-q1-int': "I=\\int\\frac{\\arcsin(x)}{\\sqrt{1-x^{2}}}dx",
                'ex2-q2-domain': "|x|<1",
                'ex2-q2-eq': "u'-\\frac{x}{1-x^{2}}u=\\frac{2}{1-x^{2}}",
                'ex2-q3-sub': "y'=u",
                'ex2-q3-eq': "y''-\\frac{x}{1-x^{2}}y'=\\frac{2}{1-x^{2}}",
                'ex2-q4-sol': "y=f(x)",
                'ex2-q4-cond': "f(0)=f'(0)=0",
                'ex3-func-map': "f:\\mathbb{R}^{2}\\rightarrow\\mathbb{R}",
                'ex3-func-def': "f(x,y)=\\begin{cases}e^{x \\ln(x^{2}+y^{2})},&\\text{si }(x,y)\\ne(0,0)\\\\ 1,&\\text{si }(x,y)=(0,0)\\end{cases}",
                'ex3-r2': "\\mathbb{R}^2",
                'ex3-dfdx': "\\frac{\\partial f}{\\partial x}",
                'ex3-dfdy': "\\frac{\\partial f}{\\partial y}",
                'ex3-r2-0': "\\mathbb{R}^{2}\\setminus\\{(0,0)\\}",

                // Solutions from 15.html
                'sol1-sing1': "x=0",
                'sol1-lnx': "\\ln(x)",
                'sol1-sqrtx': "\\sqrt{x}",
                'sol1-sing2': "x=1",
                'sol1-denom': "(1-x)^3",
                'sol1-f': "f(x)=\\sqrt{\\frac{x}{1-x}}",
                'sol1-deriv': "f'(x)=\\frac{1}{2\\sqrt{\\frac{x}{1-x}}}\\cdot\\frac{1(1-x)-x(-1)}{(1-x)^{2}}=\\frac{\\sqrt{1-x}}{2\\sqrt{x}}\\frac{1}{(1-x)^{2}}=\\frac{1}{2\\sqrt{x(1-x)^{3}}}",
                'sol1-vois0': "x=0^+",
                'sol1-equiv0': "\\frac{\\ln(x)}{\\sqrt{x(1-x)^{3}}}\\sim\\frac{\\ln(x)}{\\sqrt{x}}",
                'sol1-int-bert': "\\int_{0} \\frac{\\ln(x)}{x^{1/2}}dx",
                'sol1-exp0': "1/2 < 1",
                'sol1-vois1': "x=1^-",
                'sol1-subst': "t=1-x \\Rightarrow x=1-t",
                'sol1-equiv1': "\\frac{\\ln(x)}{\\sqrt{x(1-x)^{3}}}=\\frac{\\ln(1-t)}{\\sqrt{(1-t)t^{3}}}\\sim\\frac{-t}{\\sqrt{t^{3}}}=-\\frac{1}{\\sqrt{t}}",
                'sol1-int-riem': "\\int_{0}\\frac{-1}{\\sqrt{t}}dt",
                'sol1-exp1': "1/2 < 1",
                'sol2-p1-sub': "u=\\arcsin(x)",
                'sol2-p1-du': "du=\\frac{dx}{\\sqrt{1-x^{2}}}",
                'sol2-p1-res': "\\int u\\,du=\\frac{u^{2}}{2}+C=\\frac{(\\arcsin x)^{2}}{2}+C",
                'sol2-p2-eq': "u'-\\frac{x}{1-x^{2}}u=\\frac{2}{1-x^{2}}",
                'sol2-p2-homo': "u'-\\frac{x}{1-x^{2}}u=0",
                'sol2-p2-homo-sol': "u_h = C \\exp(\\int\\frac{x}{1-x^{2}}dx)=C \\exp(-\\frac{1}{2}\\ln(1-x^{2}))=\\frac{C}{\\sqrt{1-x^{2}}}",
                'sol2-p2-var-const': "u=\\frac{C(x)}{\\sqrt{1-x^{2}}}",
                'sol2-p2-c-prime': "\\frac{C'(x)}{\\sqrt{1-x^{2}}}=\\frac{2}{1-x^{2}} \\Rightarrow C'(x)=\\frac{2}{\\sqrt{1-x^{2}}}",
                'sol2-p2-c': "C(x)=2\\arcsin x+K",
                'sol2-p2-gen-sol': "u(x)=\\frac{2\\arcsin x+K}{\\sqrt{1-x^{2}}}",
                'sol2-p3-sub': "u=y'",
                'sol2-p3-new-eq': "u'-\\frac{x}{1-x^{2}}u=\\frac{2}{1-x^{2}}",
                'sol2-p3-y-prime': "y'(x)=u(x)=\\frac{2\\arcsin x+C_{1}}{\\sqrt{1-x^{2}}}",
                'sol2-p3-y': "y(x)=\\int (\\frac{2\\arcsin x}{\\sqrt{1-x^2}} + \\frac{C_1}{\\sqrt{1-x^2}})dx = (\\arcsin x)^{2}+C_{1}\\arcsin x+C_{2}",
                'sol2-p4-sol': "y=f(x)",
                'sol2-p4-cond': "f(0)=f'(0)=0",
                'sol2-p4-c2': "f(0)=0 \\Rightarrow (\\arcsin 0)^2 + C_1 \\arcsin 0 + C_2 = 0 \\Rightarrow C_2=0",
                'sol2-p4-c1': "f'(0)=0 \\Rightarrow \\frac{2\\arcsin 0+C_1}{\\sqrt{1-0^2}}=0 \\Rightarrow C_1=0",
                'sol2-p4-final-sol': "y(x)=(\\arcsin x)^2",
                'sol3-p1-neq0': "(x,y) \\ne (0,0)",
                'sol3-p1-polar': "x=r\\cos\\theta, y=r\\sin\\theta",
                'sol3-p1-lim': "\\lim_{(x,y)\\to(0,0)} x \\ln(x^2+y^2) = \\lim_{r\\to 0} r\\cos\\theta \\ln(r^2) = \\lim_{r\\to 0} 2r\\cos\\theta\\ln(r) = 0",
                'sol3-p1-lim-f': "\\lim_{(x,y)\\to(0,0)} f(x,y) = e^0 = 1 = f(0,0)",
                'sol3-r2': "\\mathbb{R}^2",
                'sol3-p2-neq0': "(x,y) \\ne (0,0)",
                'sol3-p2-dfdx': "\\frac{\\partial f}{\\partial x}=e^{x\\ln(x^2+y^2)}( \\ln(x^2+y^2) + \\frac{2x^2}{x^2+y^2} )",
                'sol3-p2-dfdy': "\\frac{\\partial f}{\\partial y}=e^{x\\ln(x^2+y^2)}( \\frac{2xy}{x^2+y^2} )",
                'sol3-p3-r2-0': "\\mathbb{R}^{2}\\setminus\\{(0,0)\\}",
                'sol3-p3-c1': "C^1",
                'sol3-p4-dfdx00': "\\frac{\\partial f}{\\partial x}(0,0)=\\lim_{h\\to 0}\\frac{f(h,0)-f(0,0)}{h} = \\lim_{h\\to 0}\\frac{e^{h\\ln(h^2)}-1}{h}=\\lim_{h\\to 0}\\frac{e^{2h\\ln|h|}-1}{h}",
                'sol3-p4-hln': "2h\\ln|h| \\to 0",
                'sol3-p4-equiv': "e^{2h\\ln|h|}\\sim 1+2h\\ln|h|",
                'sol3-p4-lim-res': "\\lim_{h\\to 0}\\frac{1+2h\\ln|h|-1}{h}=\\lim_{h\\to 0}2\\ln|h|=-\\infty",
                'sol3-p4-dfdx-ne': "\\frac{\\partial f}{\\partial x}",

                // Modal Formulas
                'k1-riemann': "\\int_0^a \\frac{dx}{x^\\alpha}",
                'k1-alpha1': "\\alpha < 1",
                'k1-bertrand': "\\int_0^a \\frac{dx}{x^\\alpha |\\ln x|^\\beta}",
                'k1-alpha2': "\\alpha < 1",
                'k1-alpha-beta': "\\alpha = 1 \\text{ et } \\beta > 1",
                'e1-denom': "\\sqrt{x(1-x)^3}",
                'e1-x0': "x=0",
                'e1-x1': "x=1",
                'e1-lnx': "\\ln(x)",
                'e1-x0-2': "x=0",
                'e1-x0-3': "x=0",
                'e1-x1-2': "x=1",
                'e1-deriv-rule': "(\\sqrt{u})' = \\frac{u'}{2\\sqrt{u}}",
                'e1-f': "f(x)=\\sqrt{\\frac{x}{1-x}}",
                'e1-g': "g(x) = \\frac{x}{1-x}",
                'e1-g-prime': "g'(x) = \\frac{1}{(1-x)^2}",
                'e1-x-tend-0': "x \\to 0^+",
                'e1-1mx-approx': "1-x \\approx 1",
                'e1-integrand-approx0': "\\frac{\\ln(x)}{\\sqrt{x(1-x)^3}} \\sim \\frac{\\ln(x)}{\\sqrt{x}}",
                'e1-bertrand': "\\int_0 \\frac{dx}{x^\\alpha (\\ln(1/x))^\\beta}",
                'e1-alpha-val': "\\alpha = 1/2",
                'e1-beta-val': "\\beta = -1",
                'e1-alpha-cond': "\\alpha < 1",
                'e1-t-subst': "t = 1-x",
                'e1-x-subst': "x = 1-t",
                'e1-x-tend-1': "x \\to 1^-",
                'e1-t-tend-0': "t \\to 0^+",
                'e1-ln-approx': "\\ln(1-t) \\sim -t",
                'e1-x-approx1': "x \\approx 1",
                'e1-integrand-approx1': "\\frac{\\ln(1-t)}{\\sqrt{(1-t)t^3}} \\sim \\frac{-t}{\\sqrt{t^3}} = -\\frac{1}{t^{1/2}}",
                'e1-riemann': "\\int_0 \\frac{dt}{t^\\alpha}",
                'e1-alpha-val-2': "\\alpha = 1/2",
                'e1-alpha-cond-2': "\\alpha < 1",
                'h2-subst': "y'=u",
                'k2-f1': "\\int u'(x) f(u(x)) dx",
                'k2-f2': "y' + a(x)y = b(x)",
                'k2-f3': "y(x) = e^{-\\int a(x)dx} (\\int b(x) e^{\\int a(x)dx} dx + C)",
                'e2-p1-int': "\\int\\frac{\\arcsin(x)}{\\sqrt{1-x^{2}}}dx",
                'e2-p1-form': "\\int u' u^n dx",
                'e2-p1-u': "u = \\arcsin(x)",
                'e2-p1-uprime': "u' = \\frac{1}{\\sqrt{1-x^2}}",
                'e2-p1-res-exp': "\\frac{(\\arcsin x)^2}{2} + C",
                'e2-p2-homo': "u' - \\frac{x}{1-x^2}u = 0",
                'e2-p2-sep': "\\frac{u'}{u} = \\frac{x}{1-x^2}",
                'e2-p2-int-homo': "\\ln|u| = -\\frac{1}{2}\\ln(1-x^2) + K = \\ln(\\frac{1}{\\sqrt{1-x^2}}) + K",
                'e2-p2-sol-homo': "u_h(x) = \\frac{C}{\\sqrt{1-x^2}}",
                'e2-p2-var-const': "u(x) = \\frac{C(x)}{\\sqrt{1-x^2}}",
                'e2-p2-c-prime': "C'(x) = \\frac{2}{\\sqrt{1-x^2}}",
                'e2-p2-c-int': "C(x) = 2\\arcsin x + K",
                'e2-p3-sub': "y'=u",
                'e2-p3-eq': "y'' - \\frac{x}{1-x^2}y' = \\frac{2}{1-x^2}",
                'e2-p3-new-eq': "u' - \\frac{x}{1-x^2}u = \\frac{2}{1-x^2}",
                'e2-p3-y-prime': "y'(x) = \\frac{2\\arcsin x + C_1}{\\sqrt{1-x^2}}",
                'e2-p3-int1': "\\int \\frac{2\\arcsin x}{\\sqrt{1-x^2}} dx",
                'e2-p3-int2': "\\int \\frac{C_1}{\\sqrt{1-x^2}} dx",
                'e2-p3-int2-res': "C_1 \\arcsin x",
                'e2-p3-c2': "C_2",
                'e2-p4-cond': "y(0)=0 \\text{ et } y'(0)=0",
                'e2-p4-f0': "y(0)=0",
                'e2-p4-c2-val': "C_2 = 0",
                'e2-p4-fp0': "y'(0)=0",
                'e2-p4-c1-val': "C_1 = 0",
                'k3-p0': "p_0",
                'k3-lim-cont': "\\lim_{p \\to p_0} f(p) = f(p_0)",
                'k3-polar': "x=r\\cos\\theta, y=r\\sin\\theta",
                'k3-p0-2': "p_0",
                'k3-L': "L",
                'k3-diff-def': "f(p_0+h) = f(p_0) + L(h) + o(\\|h\\|)",
                'k3-p0-3': "p_0",
                'k3-p0-4': "p_0",
                'e3-p1-exp': "\\exp",
                'e3-p1-ln': "\\ln",
                'e3-p1-expo-polar': "r\\cos\\theta \\ln(r^2) = 2r\\cos\\theta\\ln(r)",
                'e3-p1-lim-croiss': "\\lim_{r \\to 0} r\\ln r = 0",
                'e3-p1-e0': "e^0 = 1",
                'e3-p1-f00': "f(0,0)",
                'e3-p2-exp-u': "e^u",
                'e3-p2-exp-u-prime': "u'e^u",
                'e3-p2-u': "u = x\\ln(x^2+y^2)",
                'e3-p2-dudx': "\\frac{\\partial u}{\\partial x}",
                'e3-p2-dudy': "\\frac{\\partial u}{\\partial y}",
                'e3-p3-r2-0': "\\mathbb{R}^2 \\setminus \\{(0,0)\\}",
                'e3-p4-dfdx00': "\\frac{\\partial f}{\\partial x}(0,0)",
                'e3-p4-lim-def': "\\lim_{h \\to 0} \\frac{f(h,0) - f(0,0)}{h}",
                'e3-p4-lim-h': "\\lim_{h \\to 0} \\frac{e^{h\\ln(h^2)} - 1}{h}",
                'e3-p4-lim-h-equiv': "\\frac{2h\\ln|h|}{h} = 2\\ln|h|",
                'e3-p4-neg-inf': "-\\infty",

                // CS Section formulas
                'cs1-p': "p < 1",
                'cs2-h_t': "h_t",
                'cs2-h_t+1': "h_{t+1}",
                'cs2-h_t_cont': "h(t)",
                'cs2-ode-eq': "\\frac{dh(t)}{dt} = f(h(t), t, \\theta)",
                'cs3-L': "L(W)",
                'cs3-W': "W",
                'cs3-nablaL': "\\nabla L(W)",
            };

            for (const [id, latex] of Object.entries(formulas)) {
                const el = document.querySelector(`[data-id='${id}']`);
                if (el) {
                    el.dataset.latex = latex;
                    el.textContent = latex; // Fallback text
                } else {
                    // It's okay if CS formulas are not found in the initial HTML, they are added dynamically.
                    if (!id.startsWith('cs')) {
                         console.error(`√âl√©ment avec data-id '${id}' non trouv√©.`);
                    }
                }
            }
        }

        function showModal(modalId) {
            document.getElementById(modalId).style.display = "flex";
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
        }

        window.onclick = function(event) {
            const modals = document.getElementsByClassName('modal');
            for (let i = 0; i < modals.length; i++) {
                if (event.target == modals[i]) {
                    modals[i].style.display = "none";
                }
            }
        }
        
        document.addEventListener("DOMContentLoaded", function() {
            fillFormulas();
            renderKatex();
        });
    </script>
</body>
</html>